# LocalAgentWeaver

ローカル環境で動作するナレッジベース拡張型AIチャットアプリケーション

## 概要

LocalAgentWeaver（ローカル・エージェント・ウィーバー）は、プライベートなドキュメントをAIに学習させて、専門的な対話を行えるローカルAIアプリです。すべての処理がローカル環境で完結するため、機密情報も安全に扱うことができます。

## 主な機能

- 🗂️ **プロジェクト管理**: 対話コンテキストをプロジェクト単位で管理
- 📚 **ナレッジベース**: PDF・TXTファイルをアップロードしてAIに学習させる
- 🤖 **RAG チャット**: ナレッジベースを基にした高精度な回答生成
- 🔒 **プライベート**: すべての処理がローカル環境で完結
- 💾 **データ永続化**: プロジェクトとチャット履歴の保存

## セットアップ

### 1. 環境要件

- Python 3.10以上
- Ollama（ローカルLLM実行環境）
- 8GB以上のメモリ推奨

### 2. インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd LocalAgentWeaver

# 開発環境を自動セットアップ（仮想環境作成＋依存関係インストール）
python setup_dev.py
```

### 3. Ollamaのセットアップ

```bash
# Ollamaをインストール（https://ollama.ai/）

# Ollamaサービスを起動
ollama serve

# Llama 3モデルをダウンロード
ollama pull llama3
```

### 4. アプリケーションの起動

```bash
# Chainlitアプリを起動
chainlit run app.py

# ブラウザで http://localhost:8000 にアクセス
```

## 使い方

### 1. プロジェクトの作成・選択
- アプリ起動時に既存プロジェクトを選択するか、新規作成
- プロジェクトごとに独立したナレッジベースを構築

### 2. ドキュメントのアップロード
- PDF、TXT、MDファイルをドラッグ&ドロップ
- ファイルは自動的にベクトル化されてナレッジベースに追加

### 3. AIチャット
- アップロードした文書に基づく質問応答
- 出典情報付きの回答を生成
- 通常のチャット機能も利用可能

### 4. プロジェクト管理
- 📚 ナレッジ管理：アップロード済み文書の確認
- 🔄 プロジェクト切替：別のプロジェクトへの切り替え

## 技術仕様

### アーキテクチャ
- **フロントエンド**: Chainlit（WebSocketベースのリアルタイムUI）
- **バックエンド**: Python + LangChain
- **LLM**: Ollama（Llama 3）
- **ベクトルDB**: ChromaDB
- **データベース**: SQLite

### サポートファイル形式
- PDF（`.pdf`）
- テキスト（`.txt`）
- Markdown（`.md`）

## 開発

### コード品質チェック

```bash
# コードフォーマット
black src/ tests/ --check

# リント
flake8 src/ tests/

# 型チェック
mypy src/

# テスト実行
pytest
```

### ディレクトリ構成

```
LocalAgentWeaver/
├── app.py                 # メインアプリケーション
├── modules/
│   ├── project_manager.py # プロジェクト管理
│   └── rag_engine.py     # RAGエンジン
├── data/                  # データディレクトリ
├── logs/                  # ログディレクトリ
├── vector_db/            # ベクトルデータベース
├── requirements.txt       # 依存関係
├── setup_dev.py          # 開発環境セットアップ
└── README.md             # このファイル
```

## トラブルシューティング

### Ollama接続エラー
- Ollamaサービスが起動しているか確認：`ollama serve`
- モデルがダウンロード済みか確認：`ollama list`
- ポート11434が使用可能か確認

### ファイルアップロードエラー
- サポートされているファイル形式（PDF、TXT、MD）か確認
- ファイルサイズが大きすぎないか確認
- ファイルが破損していないか確認

### ベクトル検索エラー
- ChromaDBデータベースの権限を確認
- `vector_db/`ディレクトリの書き込み権限を確認

## ライセンス

Apache License 2.0

## 貢献

バグ報告や機能要求は、GitHubのIssuesでお知らせください。

## 今後の展開

- Phase 2: マルチエージェントシステム
- Phase 3: ツール連携機能（Web検索、ファイルI/O）
- Phase 4: ハイブリッドクラウド対応